<dom-module id="burst-api">
	<template>
		
		<iron-ajax
                   id="burstApiRequest"
				   auto
                   url="{{apiUrl}}"
				   params="{{params}}"
				   handle-as="json"
				   last-response="{{response}}"
				   on-response="_handleResponse"
				   debounce-duration="300"></iron-ajax>
	</template>
	<script>
        class BurstApi extends Polymer.Element{
            static get is() { return "burst-api" }
            
            constructor(){
                super()
            }
            
            connectedCallback(){
                super.connectedCallback();
            }
            
            static get properties(){
                return {
                    id: {
                        type: String,
                        value: ""
                    },
                    response: {
                        type: Object,
                        notify: true
                    },
                    params: {
                        type: Object
                    },
                    apiUrl: {
                        type: String,
                        value: API_URL
                    }
                }
            }
            
            _handleResponse(response){
                //console.log(response);
            }

            generateRequest(){
                this.shadowRoot.querySelector("#burstApiRequest").generateRequest();
            }
            
            ready(){
                super.ready();
            }
        }
        
        customElements.define(BurstApi.is, BurstApi);
	</script>
</dom-module>